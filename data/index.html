<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Drug Prescription System</title>
  
  <style>
    body {
      font-family: Arial, sans-serif;
      background-color: #f4f4f4;
      margin: 0;
      padding: 0;
      line-height: 1.4;
    }

    .heading {
      margin: 2rem 0;
    }

    .container {
      max-width: 50rem;
      margin: 2rem auto;
      padding: 1.5rem;
      background: #fff;
      border-radius: 0.5rem;
      box-shadow: 0 0 10px rgba(0, 0, 0, 0.1);
    }

    h1 {
      text-align: center;
      margin-bottom: 1rem;
    }

    form div {
      margin-bottom: 1rem;
    }

    label {
      display: block;
      margin-bottom: 0.5rem;
    }

    .answer-btn {
      display: inline-block;
      padding: 0.75rem 1.5rem;
      margin: 0.5rem;
      background-color: #00796b;
      color: #fff;
      border: none;
      border-radius: 0.25rem;
      cursor: pointer;
      font-size: 1rem;
      text-align: center;
    }

    .answer-btn:hover {
      background-color: #004d40;
    }

    .no-btn {
      background-color: #d32f2f;
    }

    
    .no-btn:hover {
      background-color: #b71c1c;
    }

    #prescriptionResult {
      margin-top: 1rem;
      padding: 1rem;
      background: #e0f7fa;
      border-radius: 0.5rem;
    }

    button[type="submit"] {
      background-color: #00796b;
      color: #fff;
    }

    button[type="submit"]:hover {
      background-color: #004d40;
    }

    .submit-btn {
      display: block;
      width: 100%;
      padding: 0.75rem;
      background-color: #0288d1; /* A nice blue color */
      color: #fff;
      border: none;
      border-radius: 0.25rem;
      cursor: pointer;
      font-size: 1rem;
      font-weight: bold;
      text-transform: uppercase;
      transition: background-color 0.3s, box-shadow 0.3s;
    }

    .submit-btn:hover {
      background-color: #0277bd; /* Slightly darker blue on hover */
    }

    .submit-btn:active {
      background-color: #01579b; /* Even darker blue when pressed */
      box-shadow: 0 4px 6px rgba(0, 0, 0, 0.2);
    }

    .submit-btn:focus {
      outline: none;
      box-shadow: 0 0 0 2px #81d4fa; /* A light blue outline for accessibility */
    }

    .temp-btn {
      margin-bottom: 2rem;
      display: block;
      width: 100%;
      padding: 0.75rem;
      background-color: #0288d1; /* A nice blue color */
      color: #fff;
      border: none;
      border-radius: 0.25rem;
      cursor: pointer;
      font-size: 1rem;
      font-weight: bold;
      text-transform: uppercase;
      transition: background-color 0.3s, box-shadow 0.3s;
    }

    .i-text {
      color: red;
    }

    
    .reading {
      font-size: 1rem;
      display: inline-block;
      margin: 0.5rem;
      text-align: center;
    }

    #timer {
      margin: 0;
      padding: 0;
      color: green;
    }
  </style>
</head>
<body>
  <div class="container">
    <h1 class="heading">SMART DRUG PRESCRIPTION SYSTEM</h1>
    <form id="healthForm">
      <!-- Questions will be added dynamically here -->
    </form>
    <div id="prescriptionResult"></div>
    <button class="submit-btn" onclick="submitForm()">Submit</button>
  </div>

  <script>
    const questions = [
      "Are you unable to sleep?",
      "Are you currently taking any medications prescribed by your doctor?",
      "Are you currently pregnant?", 
      "Do you have difficulty breathing?",
      "Do you have a cough?",
      "Do you have headache",
      "Do you have malaria?",
      "Are you experiencing fatigue?",
      "Are you experiencing any pain or discomfort in your abdominal?",
      "Is your energy level low these days?",
      "Have you noticed any changes in your appetite?",
      "Are you experiencing nausea or vomiting?",
      "What is your temperature?",
      "What is your heart rate?"
    ];

    const questionContainer = document.getElementById('healthForm');

    questions.forEach((question, index) => {
      const div = document.createElement('div');
      // if( index == 12) {
        // div.innerHTML = <p> hello </p>;
      // }else {
      console.log(index);
      
        div.innerHTML = `
          <label>${question}</label><br>
          <input  type="radio" id="q${index}yes" name="q${index}" value="yes">
          <label class="answer-btn" for="q${index}yes">Yes</label>
          <input type="radio" id="q${index}no" name="q${index}" value="no">
          <label class="answer-btn no-btn" for="q${index}no">No</label>
          <br><br>
        `;
      // }
      questionContainer.appendChild(div);
    });

    function getFormData() {
      const formData = {};
      questions.forEach((_, index) => {
        formData[`q${index}`] = document.querySelector(`input[name="q${index}"]:checked`)?.value || 'no';
      });
      return formData;
    }

    function submitForm() {
      const formData = getFormData();
      const prescription = generatePrescription(formData);
      document.getElementById('prescriptionResult').innerText = prescription;
    }

    function generatePrescription(formData) {
      let prescription = "Based on your responses, we recommend the following:";
    // const questions = [
    //   "Are you unable to sleep?",    1
    //   "Are you currently taking any medications prescribed by your doctor?",   2
    //   "Are you currently pregnant?",     3
    //   "Do you have difficulty breathing?",   4
    //   "Do you have a cough?",    5 tutolin, coflin, labocof
    //   "Do you have headache",    6 panadol, paracetamol
    //   "Do you have malaria?",    7 
    //   "Are you experiencing fatigue?",   8 ibruprofin, pentax tablet, lapain, novagin
    //   "Are you experiencing any pain or discomfort in your abdominal?",    9
    //   "Is your energy level low these days?",   10
    //   "are you experiencing indigestion?",    11 gelucine, mistmag(mist magesium trisilicate), 
    //   "Are you experiencing nausea or vomiting?"   12 avomine table, taking
    //   "What is your temperature?",
    //   "What is your heart rate?"
    // ];

      let prescribedDrugs = "prescribedDrug";
      if (formData['q0'] === 'yes') { //   "Are you unable to sleep?",    1
        prescribedDrugs += "\n- Take a sleeping pills like \"cenpain night\", Doxepin, Eszopiclone, Temazepam, etc";
      }
      if (formData['q1'] === 'yes') {//   "Are you currently taking any medications prescribed by your doctor?",   2
        return "no drugs prescribed because of your current medications\nContinue with your current medications and consider talking to your doctor to know if what you're feeling is normal side effect of the current medication.";
      }
      if (formData['q2'] === 'yes') {//   "Are you currently pregnant?",     3
        return "\n- Pregnancy is a very delicate and precautions has to be taken, ensure to register for ante-natal program and attend regularly.\nHere are other recommendations for you:\n1. Maintain a balanced diet rich in vitamins and minerals.\n2. Get regular prenatal checkups to monitor the health of you and your baby.\n3. Stay hydrated and rest whenever you feel tired.";
      }
      if (formData['q3'] === 'yes') {//   "Do you have difficulty breathing?",   4
        prescribedDrugs += "\n- Lick mentor sweet like Shaltoux, Tom-Tom, etc to clear your clogged nose.\n If it doesn't improve after 5 hours or if the your breathlessness isn't due to clogged nose, consider seeing your doctor.";
      }
      if (formData['q4'] === 'yes') {//   "Do you have a cough?",    5
        prescribedDrugs += "\n- consider using cough syrup like tutolin, coflin, labocof, etc.\nConsult a healthcare professional if cough is persistent.";
      }
      if (formData['q5'] === 'yes') {//   "Do you have headache",    6
        prescribedDrugs += "\n- use any this medicine: paracetamol or panadol extra.\nIf the headache is persistent, You might need to see your doctor.";
      }
      if (formData['q6'] === 'yes') {//   "Do you have malaria?",    7
        prescribedDrugs += "\n- Use any of this: Amatem, coartem, etc. \nConsult a doctor if the malaria persist after completing the recommended medications.";
      }
      if (formData['q7'] === 'yes') {//   "Are you experiencing fatigue?",   8
        prescribedDrugs += "\n- use these drugs: Lapain tablet or Ibruprofene, Pentax, Panadol extra, etc.\nBut if you're an ulcer patient, use orphesic tablet instead. \nDiscuss fatigue with a healthcare provider if it persist.";
      }
      if (formData['q8'] === 'yes') {// "Are you experiencing any pain or discomfort in your abdominal?",    9
        prescribedDrugs += "\n- You may need an evaluation for abdominal pain or discomfort, visit your doctor";
      }
      if (formData['q9'] === 'yes') {//   "Is your energy level low these days?",   10
        prescribedDrugs += "\n- Ensure to eat balance diet to optimize your energy level. \n but if low energy level persist, Consult a nutritionist or doctor for changes in appetite.";
      }
      if (formData['q10'] === 'yes') {//   "Have you noticed any changes in your appetite?",    11
        prescribedDrugs += "\n- Seek medical attention for nausea or vomiting.";
      }
      if (formData['q11'] === 'yes') { //   "Are you experiencing nausea or vomiting?"   12
        prescribedDrugs += "\n- consider taking Key lime(locally called osan wewe), phenegan tablet, Avomine tablet, etc.";
      }
      if (formData['q12'] === 'yes') { //   "What is your temperature?"    13
        prescribedDrugs += "\n- consider taking Key lime(locally called osan wewe), phenegan tablet, Avomine tablet, etc.";
      }
      

      // if all answer is no
      if (prescribedDrugs === "Based on your responses, we recommend the following:") { // if all is no
        prescribedDrugs += "\nNo specific drug recommendations. \n kindly see your doctor";

      }

      prescription += prescribedDrugs;

      // Check for all possible combinations of answers
      if (formData['q0'] === 'yes') {
        prescription += "\n- You might want to consider sleep improvement strategies.";
        return prescription;
      }
      if (formData['q1'] === 'yes') {
        prescription += "\n- Continue with your current medications.";
      }
      if (formData['q2'] === 'yes') {
        prescription += "\n- Consult your doctor for any pregnancy-related medications.";
      }
      if (formData['q3'] === 'yes') {
        prescription += "\n- Seek medical advice for difficulty in breathing.";
      }
      if (formData['q4'] === 'yes') {
        prescription += "\n- Consult a healthcare professional for persistent cough.";
      }
      if (formData['q5'] === 'yes') {
        prescription += "\n- You might need treatment for headache.";
      }
      if (formData['q6'] === 'yes') {
        prescription += "\n- Consult a doctor for fever.";
      }
      if (formData['q7'] === 'yes') {
        prescription += "\n- Discuss fatigue with a healthcare provider.";
      }
      if (formData['q8'] === 'yes') {
        prescription += "\n- You may need an evaluation for abdominal pain or discomfort.";
      }
      if (formData['q9'] === 'yes') {
        prescription += "\n- Consult a nutritionist or doctor for changes in appetite.";
      }
      if (formData['q10'] === 'yes') {
        prescription += "\n- Seek medical attention for nausea or vomiting.";
      }
      if (formData['q11'] === 'yes') {
        prescription += "\n- Consider a general health check-up based on your overall energy level.";
      }

      // Fallback message if no specific recommendations apply
      if (prescription === "Based on your responses, we recommend the following:") {
        prescription += "\nNo specific recommendations based on your responses. \n kindly see your doctor";

      }
  
  return prescription;
}
    function measureTemperatureAndHeartRate() {
      // Update readings every 2 seconds for 20 seconds straight and stop
      let counter = 0;
      const interval = setInterval(() => {
        // Your code to run every 2 seconds
        console.log("This code runs every 2 seconds");
        counter += 2;
        document.querySelector(".temp-btn").innerText = counter + " seconds";
        fetch("/data")
            .then(response => response.json())
            .then(data => {
                document.getElementById("temperature").innerText = data.temperature.toFixed(2);
                document.getElementById("heartrate").innerText = data.heartrate;
            })
            .catch(error => console.error("Error fetching data:", error));
            if (counter >= 20) {
              clearInterval(interval);
              console.log("Stopped after 20 seconds");
            }
            document.querySelector(".temp-btn").innerText = "Measure";
      }, 2000);
    }


  </script>
</body>
</html>
